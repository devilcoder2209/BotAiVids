{% extends 'admin/model/list.html' %}

{% block list_table %}
<div class="table-responsive">
    <table class="table table-striped">
        <thead>
            <tr>
                {% if actions %}
                <th><input type="checkbox" name="rowtoggle" class="action-rowtoggle" /></th>
                {% endif %}
                {% for c, name in list_columns %}
                <th>
                    {% if admin_view.is_sortable(c) %}
                    <a href="{{ sort_url(c) }}">{{ name }}</a>
                    {% else %}
                    {{ name }}
                    {% endif %}
                </th>
                {% endfor %}
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for row in data %}
            <tr>
                {% if actions %}
                <td><input type="checkbox" name="rowid" class="action-checkbox" value="{{ get_pk_value(row) }}" /></td>
                {% endif %}
                {% for c, name in list_columns %}
                <td>
                    {% set value = get_value(row, c) %}
                    {% if c == 'status' %}
                        <span class="badge badge-{{ 'success' if value == 'completed' else 'warning' if value == 'processing' else 'danger' }}">
                            {{ value.title() }}
                        </span>
                    {% elif c == 'is_admin' %}
                        <span class="badge badge-{{ 'primary' if value else 'secondary' }}">
                            {{ 'Admin' if value else 'User' }}
                        </span>
                    {% elif c in ['created_at', 'updated_at'] %}
                        {{ value.strftime('%Y-%m-%d %H:%M') if value else 'N/A' }}
                    {% elif c == 'description' and value %}
                        {{ value[:50] }}{% if value|length > 50 %}...{% endif %}
                    {% else %}
                        {{ value }}
                    {% endif %}
                </td>
                {% endfor %}
                <td>
                    {% if admin_view.can_edit %}
                    <a href="{{ get_url('.edit_view', id=get_pk_value(row), url=return_url) }}" class="btn btn-warning btn-sm">Edit</a>
                    {% endif %}
                    {% if admin_view.can_delete %}
                    <a href="{{ get_url('.delete_view', id=get_pk_value(row), url=return_url) }}" 
                       class="btn btn-danger btn-sm" 
                       onclick="return confirm('Are you sure?')">Delete</a>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
{% endblock %}
